# 基于深市登记结算 XML 实时报文接口规范（Ver 1.23）

> [深市登记结算 XML 实时报文接口规范（Ver 1.23）](http://www.chinaclear.cn/zdjs/jszsc/202405/f25a16ec032b460d927cfe6628c15460/files/%E6%B7%B1%E5%B8%82%E7%99%BB%E8%AE%B0%E7%BB%93%E7%AE%97XML%E5%AE%9E%E6%97%B6%E6%8A%A5%E6%96%87%E6%8E%A5%E5%8F%A3%E8%A7%84%E8%8C%83%EF%BC%88Ver%201.23%EF%BC%89.pdf)
> 
> [D-COM网关用户手册](http://www.chinaclear.cn/zdjs/cszsc/201704/d79759b58ec146c88ed8e6f5d2a106cc/files/20170426091552503.pdf)
> 
> [PROP通用接口用户使用手册](http://www.chinaclear.cn/zdjs/cshsc/202008/0cd8f32c88c6403eac995d8b78876f36/files/20200804142514409.pdf)
### socket结构定义
表12 报文说明数据块结构说明

| 描述           | 类型      | 长度（字节）         | 备注           |
| -------------- | --------- | -------------- |----------------------------------------------------------------------------------|
|数据块版本号 |2|Exact2NumericText| 当前版本为“01”                                                                        |
|对应报文的类型|3|Exact3AlphaNumericText| 当前只包含XML一种类型，代号为“XML”                                                            |
|对应报文的长度|10|Exact10Text| 数据块对应的报文的字节总长度（不包含报文说明数据块本身 长度）。例如，当XML报文长 度为1024字节时，该字段值为 “      1024”，即在左边补充空格 |
|保留字段 |17 |Exact17Text | 目前为17位空格                                                                         |


### 报文类型
参与人结算公司
1. 登录报文  登录应答
2. 注销报文  注销应答
3. 心跳报文
4. 业务委托报文  ACKM业务确认报文  业务回报报文

结算公司参与人
1. 心跳报文
2. 数据类报文

 
控制报文的业务类型



### PROP处理业务逻辑
- CompletableFuture实现同步功能
- req.dbf 写入数据
- 不断循环读取数据 rep.dbf数据的头文件判断数量是否有变化 200ms
- 判断数据的相应状态 
  - 成功 
  - 失败